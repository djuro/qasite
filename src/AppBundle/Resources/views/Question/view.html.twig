{% extends "AppBundle::layout.html.twig" %}

{% block body %}
    <div id="wrapper">
        
    {% include "AppBundle::header.html.twig" %}
    <section id="featured">
        <!-- start slider -->
        <div class="container">
        <div class="page-header"><h4>{{question.title}}</h4></div>
        <div class="row">
            <div class="col-md-12">
                <p>
                    {{question.body}}
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                Asked by: <a href="#">{{question.authorLabel}}</a>
            </div>
            <div class="col-md-12">
                {{question.createdAt|date("d.m.'y. G:i")}}h
            </div>
        </div>
        {% if authenticated == false %}
            <div class="row">
                <div class="col-md-12">
                    <a href="{{path('question_engage',{'question':question.id})}}">add a comment</a>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <a href="{{path('question_engage',{'question':question.id})}}" class="btn btn-default">Your Answer</a>
                </div>
            </div>
        {% else %}
            <div class="row">
                <div class="col-md-12">
                    <a href="#" id="comment-form-control">add a comment</a>
                </div>
            </div>
        {% endif %}
        <div class="row">
            <div class="col-md-12">
                <form novalidate method="post" action="{{path('question_comment_new',{'question':question.id})}}">
                    <div class="form-group">
                    <div class="row">
                        <div class="col-md-12">
                            {{form_label(comment_form.comment)}}
                        </div>
                        <div class="col-md-12">
                            {{form_widget(comment_form.comment,{'attr':{'class':'form-control'}})}}
                            {{form_widget(comment_form._token)}}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <button type="submit" class="btn btn-default">Post Comment</button>
                        </div>
                    </div>
                    </div>
                </form>
            </div>
        </div>
        {% if answers|length() > 0%}
            <div class="row">
                <div class="col-md-12">
                    {% if answers|length() == 1 %}
                        <h4>{{answers|length()}} answer</h4>
                    {% else %}
                        <h4>{{answers|length()}} answers</h4>
                    {% endif %}
                </div>
            </div>
        {% endif %}
        {% for answer in answers %}
            <div class="row">
                <div class="col-md-10">
                    {{answer.body}}
                </div>
            </div>
            <div class="row">
                <div class="col-md-1">
                    <a href="#">{{answer.authorLabel}}</a>
                </div>
                <div class="col-md-2">
                    {{answer.createdAt|date("d. m. 'y. G:i")}}h
                </div>
            </div>
        {% endfor %}
        {% if authenticated == true %}
        <form novalidate action="" method="post" id="answer-form">
            <div class="form-group">
                <div>&nbsp;</div>

                <div>&nbsp;</div>
                <div class="row">
                    <div class="col-md-2">
                        {{form_label(answer_form.answer)}}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        {{form_widget(answer_form.answer,{'attr':{'class':'form-control'}})}}
                        {{form_errors(answer_form.answer)}}
                        {{form_widget(answer_form._token)}}
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-4">
                        <button type="submit" class="btn btn-default">Post your answer</button>
                    </div>
                </div>
            </div>
            </form>
        {% endif %}
    </div>
    </section>
            </div>
{% endblock body %}
